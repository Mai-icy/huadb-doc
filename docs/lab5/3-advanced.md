# 高级功能

## 任务 1：投影算子下推（2 分）

### 实验描述

基础功能中完成了选择和连接算子的下推，高级功能中要求在此基础上添加投影算子的下推功能。

### 实现思路

-   步骤 0：理解投影算子下推相较于选择算子的区别，思考如何在算子下推后维护数据列信息。

-   步骤 1：修改 Optimizer 类，添加用于辅助 PushProjection 函数的相关私有成员函数和成员变量。

-   步骤 2：补全 Optimizer 类的 PushProjection 函数，注意并非部分连接运算后需要添加投影运算。

## 任务 2：基于动态规划算法的连接顺序选择（1 分）

### 实验描述

基础功能中的连接顺序选择使用的是贪心算法，高级功能中要求在此基础上添加基于动态规划的连接顺序选择算法。

### 实现思路

在 ReorderJoin 函数中基于连接种类选择使用的算法类型，并在 Optimizer 中添加基于动态规划的连接顺序选择算法的成员函数。

## 任务 3：基于数据画像的基数估计（1 分）

### 实验描述

基础功能中连接顺序选择过程基于了独立性简化假设进行技术估计，高级功能中要求使用数据画像来提高 distinct value 估计的准确性（基于 Count-Min 或 HyperLogLog 算法）。

### 实现思路

修改数据库 Analyze 过程，在分析过程中使用 Count-Min 或 HyperLogLog 算法估计 distinct value。
